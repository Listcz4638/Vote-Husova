<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>VÃ½sledky hlasovÃ¡nÃ­ â€“ Husova</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>ğŸ“Š VÃ½sledky hlasovÃ¡nÃ­</h1>

<table id="resultsTable">
  <thead>
    <tr>
      <th>SoutÄ›Å¾Ã­cÃ­</th>
      <th>PoÄet hlasÅ¯</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  const ADMIN_KEY = prompt("ProsÃ­m zadejte admin klÃ­Ä pro zobrazenÃ­ vÃ½sledkÅ¯:");

  fetch(`/api/results?key=husovaadmin`)
    .then(res => {
      if (!res.ok) throw new Error("PÅ™Ã­stup zamÃ­tnut");
      return res.json();
    })
    .then(data => {
      const tbody = document.querySelector("#resultsTable tbody");
      tbody.innerHTML = "";

      Object.entries(data)
        .sort((a,b) => b[1] - a[1]) // seÅ™azenÃ­ podle hlasÅ¯
        .forEach(([name, count]) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `<td>${name}</td><td>${count}</td>`;
          tbody.appendChild(tr);
        });
    })
    .catch(err => {
      alert("âŒ Å patnÃ½ admin klÃ­Ä nebo chyba serveru");
    });
</script>

</body>
</html>
